<match fluent.**>
  @type null
</match>

<source>
  @type tail
  path /var/log/containers/*.log
  pos_file fluentd-docker.pos
  time_format %Y-%m-%dT%H:%M:%S
  tag kubernetes.*
  format json
  read_from_head true
</source>

<filter kubernetes.var.log.containers.**.log>
  @type kubernetes_metadata
  ca_file /etc/td-agent/secret_ca_file
</filter>



 <filter kubernetes.var.log.containers.**.log>
   @type record_modifier
   <record>
     app_name ${record['kubernetes']['container_name']}
     pod_name ${record['kubernetes']['pod_name']}
   </record>
 </filter>

<filter kubernetes.var.log.containers.**.log>
  @type record_transformer
  remove_keys docker,kubernetes
</filter>
